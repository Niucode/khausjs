{"version":3,"sources":["khausjs.coffee","kahusjs.js"],"names":["$","fn","khausImageUploader","each","this","key","div","images","input","inputName","find","on","filename","attr","split","pop","type","name","value","appendTo","remove","removeAttr","ev","val","target","files","reader","match","FileReader","onload","file","e","id","btoa","now","replace","class","result","prependTo","src","readAsDataURL","khausCleanFormErrors","form","removeClass","tooltip","khausDisplayFormErrors","settings","counter","o","extend","errorsType","errors","window","khaus","resetForm","badge","inTab","page","pageName","tab","toLowerCase","size","parents","addClass","length","text","parseInt","html","insertAfter","placement","title","container","khausLaunchAlerts","reset","khausNotify","message","icon","icon_cont","message_cont","message_title","notify","delay","template","append","one","setTimeout","trigger","khausLaunchFormErrors","default","primary","success","danger","warning","info","isArray","isPlainObject","titulo","mensaje","khausAjaxWait","ajaxSetup","beforeSend","complete","khausAttachName","is","khausConfirmBeforeSubmit","data","preventDefault","khausConfirm","off","submit","khausAlert","modal_D1","modal_D2","modal_D3","modal_body","modal_footer","modal_header","data-dismiss","modal","khausPrompt","defaultValue","callback","input_prompt","css","font-weight","select","khausForm","ajaxForm","delegation","response","status","xhr","$form","redirect","location","url","tiempo","error","responseJSON","parseJSON","responseText","khausNumberFormat","number","khausLoadSelect","$select","fk","selected","get","baseURL","r","nombre","khausClone","clon","selector","last","clone","newName","khausRemoveParent","jQuery","document","ready"],"mappings":"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","file":"kahusjs.min.js","sourcesContent":["do ($=jQuery) ->\n\n\n    ### MULTIUPLOADER DE IMAGENES\n    # ==========================================================================\n    # Transforma un input file en un uploader multiple de imagenes con preview\n    # ==========================================================================\n    ###\n    $.fn.khausImageUploader = ()->\n        $.each @, (key, div)->\n            images = $(div).find('img.khaus-uploaded-thumb')\n            images.on 'click', ()->\n                filename = $(@).attr('src').split('/').pop()\n                $('<input>', type:'hidden', name:'khaus_delete_thumb[]', value:filename).appendTo div\n                $(@).remove()\n            input = $(div).find(':input[type=file]')\n            inputName = input.attr 'name'\n            input.removeAttr 'name'\n            input.on 'change', (ev)->\n                if $(@).val()\n                    $.each ev.target.files, (key, value)->\n                        if value.type.match('image.*')\n                            reader = new FileReader()\n                            reader.onload = ((file)->\n                                return (e)->\n                                    id = btoa($.now())\n                                    id = id.replace(/[^a-z]+/ig, '')\n                                    $('<input>', \n                                        'class':id\n                                        'type':'hidden'\n                                        'name':inputName + '[]'\n                                        'value':e.target.result\n                                    ).prependTo div\n                                    $('<img>', \n                                        'class':'khaus-upload-thumb'\n                                        'src':e.target.result\n                                    ).on('click', ()->\n                                        $('input.' + id + '').remove()\n                                        $(@).remove()\n                                    ).prependTo div\n                            )(value)\n                        reader.readAsDataURL(value);\n                    $(@).val ''\n\n    ### LIMPIA LOS ERRORES DEL FORMULARIO BOOTSTRAP\n    # ==========================================================================\n    # @param DOMElement form - formulario\n    # ==========================================================================\n    ###\n    $.khausCleanFormErrors = (form) ->\n        $(form).find(\".form-group\").removeClass \"has-error has-feedback\"\n        $(form).find(\"span.form-control-feedback\").remove()\n        $(form).find(\"span.help-block\").remove()\n        $(form).find(\":input\").tooltip \"destroy\"\n\n\n    ### DESPLIEGA LOS ERRORES DE FORMULARIO\n    # ==========================================================================\n    # @param string type (block|tooltip) forma de mostrar errores\n    # @param DOMElement form - formulario que realizo el envio\n    # @param object errors - errores {'inputName':'Error Message'}\n    #\n    # En caso de que no se envie el parametro errors, buscara esos datos\n    # dentro de la variable global khaus\n    # ==========================================================================\n    ###\n    $.khausDisplayFormErrors = (settings)->\n        o = $.extend\n            errorsType : 'block'\n            form : null\n            errors : window.khaus.errors\n            resetForm : false\n        , settings\n        counter = 0\n        $.each o.errors, (key, value)->\n            if key.match /^khaus/\n                key = key.replace('khaus', '').toLowerCase()\n                if typeof window.khaus[key] isnt 'undefined'\n                    window.khaus[key] = value\n                    return true\n            counter++\n            input = $(o.form).find(\":input[name=#{key}]\")\n            if input.size() isnt 1 # si no lo encuentra busca inputs array[]\n                input = $(o.form).find(\":input[name^='#{key}[']\")\n            input.parents('.form-group').addClass \"has-error\"\n            # si el input se encuentra dentro del un formulario tabulado\n            inTab = input.parents('.tab-content')\n            if inTab.size() > 0\n                if counter is 1\n                    $('ul.nav-tabs .badge').remove()\n                page = input.parents('.tab-pane')\n                pageName = page.attr 'id'\n                #if not page.hasClass 'active'\n                tab = $(\"ul.nav-tabs a[href=##{pageName}]\")\n                badge = tab.find '.badge'\n                if badge.length is 0\n                    badge = $('<span>', 'class':'badge').text 0\n                    badge.appendTo tab\n                badge.text parseInt(badge.text()) + 1\n            switch o.errorsType\n                when 'block'\n                    $(\"<span>\", \"class\":\"help-block\").html(value).insertAfter input\n                when 'tooltip'\n                    input.tooltip(\n                        placement : \"top\"\n                        title     : value\n                        container : \"body\"\n                    )\n        $.khausLaunchAlerts()\n        if counter is 0\n            if o.resetForm\n                $(o.form)[0].reset()\n\n\n    ### DESPLEGA UNA ALARTA O NOTIFICACION FLOTANTE\n    # ==========================================================================\n    # @param string title - titulo de la notificacion\n    # @param string message - mensaje de la notificacion\n    # @param object settings {\n    #   delay : (int) tiempo en milisegundos que permanecera la alerta en pantalla\n    #   template : (string) apariencia bootstrap default|primary|success|info|danger|warning\n    #   icon : (string) icono de la alerta req. Font Awesome ex: fa-plus\n    # }\n    # ==========================================================================\n    ###\n    $.khausNotify = (title, message, settings) ->\n        o = $.extend\n            delay : 10000\n            template: \"default\"\n            icon : null\n        , settings\n        container = $(\".khaus-notify-container\")\n        if container.size() == 0\n            container = $(\"<div>\", \"class\":\"khaus-notify-container\").prependTo \"body\"\n        notify = $(\"<div>\", \"class\":\"khaus-notify khaus-notify-#{o.template}\")\n        if o.icon isnt null\n            icon =  $(\"<i>\", \"class\":\"fa fa-fw #{o.icon}\")\n            icon_cont = $(\"<div>\", class:\"icon-container\").html icon\n            notify.append icon_cont\n        message_cont = $(\"<div>\", class:\"text-container\")\n        message_title = $(\"<div>\", class:\"title\").html(title).appendTo message_cont\n        message = $(\"<div>\").html(message).appendTo message_cont\n        notify.append message_cont\n        notify.appendTo container\n        notify.on \"click\", ->\n            $(@).removeClass \"khaus-notify-show\"\n            $(@).addClass \"khaus-notify-hide\"\n            $(@).one \"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend\", ->\n                $(@).remove()\n        setTimeout ->\n            notify.addClass \"khaus-notify-show\"\n            setTimeout ->\n                notify.trigger \"click\"\n            , o.delay\n        , 1\n\n\n    ### MUESTRA LOS ERRORES ALMACENADOS EN LAS VARIABLES KHAUS\n    # ==========================================================================\n    # \n    # ==========================================================================\n    ###\n    $.khausLaunchFormErrors = ()->\n        if !!window.khaus.errors and !!window.khaus.form\n            form = $(\"form[name=#{window.khaus.form}]\")\n            $.khausDisplayFormErrors(\n                errorsType: 'block'\n                form: form\n            )\n\n    ###\n    # ==========================================================================\n    # \n    # ==========================================================================\n    ###\n    $.khausLaunchAlerts = (settings) ->\n        o = $.extend\n            title : \n                default : \"\"\n                primary : \"\"\n                success : \"El proceso ha finalizado\"\n                danger  : \"Ha ocurrido un error\"\n                warning : \"Importante\"\n                info    : \"Informaci&oacute;n\"\n        , settings\n        $.each o.title, (key, value)->\n            if !!window.khaus[key]\n                if $.isArray(window.khaus[key])\n                    $.khausNotify(window.khaus[key][0], window.khaus[key][1], {\n                        template : key\n                    })\n                else if $.isPlainObject(window.khaus[key])\n                    $.each window.khaus[key], (titulo, mensaje)->\n                        $.khausNotify(titulo, mensaje, {\n                            template : key\n                        })\n                else\n                    $.khausNotify(value, window.khaus[key], {\n                        template : key\n                    })\n                window.khaus[key] = ''\n\n    ###\n    # ==========================================================================\n    # \n    # ==========================================================================\n    ###\n    $.khausAjaxWait = (settings)->\n        o = $.extend\n            type : 'cursor'\n        , settings\n        switch o.type\n            when 'cursor'\n                $.ajaxSetup\n                    beforeSend : ()->\n                        $('body').addClass 'khaus-ajax-wait'\n                    complete : ()->\n                        $('body').removeClass 'khaus-ajax-wait'\n                    success : ()->\n                        $('body').removeClass 'khaus-ajax-wait'\n\n\n\n\n    ### ADJUNTA AL FORMULARIO EL PARAMETRO NAME\n    # ==========================================================================\n    # Si el formulario tiene el atributo [name] activado \n    # antes de realizar el envio de los parametros\n    # agrega un input hidden name=\"_name\" value=\"<nombre del formulario>\"\n    # ==========================================================================\n    ###\n    $.fn.khausAttachName = ()->\n        $.each @, ()->\n            $(@).on 'submit', (ev)->\n                if $(@).is('[name]') and $(@).find('input[name=_name]').size() is 0\n                    $('<input>', \n                        'name':'_name'\n                        'type':'hidden'\n                        'value':$(@).attr('name')\n                    ).prependTo($(@))\n\n\n    ### CAPTURA EL EVENTO SUBMIT Y ENVIA UN MODAL KHAUS CONFIRM\n    # ==========================================================================\n    # @param object settings {\n    #   title : (string) - titulo de la ventana modal\n    #   message : (string) - mensaje de la ventana modal\n    # }\n    # Al presionar el boton aceptar del modal se realizara el submit del formulario\n    # de lo contrario no se realizara ninguna accion\n    # ==========================================================================\n    ###\n    $.fn.khausConfirmBeforeSubmit = ->\n        $.each @, ->\n            title = $(@).data 'khaus-title' || ''\n            message = $(@).data 'khaus-confirm' || ''\n            $(@).on 'submit', (ev)->\n                ev.preventDefault()\n                e = $(@)\n                $.khausConfirm title, message, ->\n                    e.off 'submit'\n                    e.submit()\n\n\n    ### \n    # ==========================================================================\n    # Envia un modal de alerta con las opciones aceptar y cancelar\n    # Metodos de llamada:\n    # - por codigo: $.khausAlert('Titulo', 'Mensaje');\n    # - por dom: <button data-khaus-alert=\"Mensaje\" data-khaus-title=\"Opcional\">\n    # El titulo es opcional en la llamada por dom\n    # ==========================================================================\n    ### \n    $.khausAlert = (title, message) ->\n        if $(\".khaus-modal-alert\").size() > 0\n            $(\".khaus-modal-alert\").remove()\n        modal_D1 = $(\"<div>\", \"class\":\"modal fade khaus-modal-alert\")\n        modal_D2 = $(\"<div>\", \"class\":\"modal-dialog\").appendTo modal_D1\n        modal_D3 = $(\"<div>\", \"class\":\"modal-content\").appendTo modal_D2\n        modal_header = $(\"<div>\", \"class\":\"modal-header\").appendTo modal_D3\n        $(\"<h4>\", \"class\":\"modal-title\").html(title).appendTo modal_header\n        modal_body = $(\"<div>\", \"class\":\"modal-body\").html(message).appendTo modal_D3\n        modal_footer = $(\"<div>\", \"class\":\"modal-footer\").appendTo modal_D3\n        $(\"<button>\", \"type\":\"button\", \"class\":\"btn btn-primary\", \"data-dismiss\":\"modal\").html(\"Aceptar\").appendTo modal_footer\n        modal_D1.modal \"show\"\n\n    $.fn.khausAlert = ->\n        @each ->\n            $(@).on 'click', (ev)->\n                message = $(@).data 'khaus-alert'\n                title = $(@).data 'khaus-title' || ''\n                $.khausAlert(title, message)\n\n    ###\n    # ==========================================================================\n    # \n    # ==========================================================================\n    ###\n    $.khausPrompt = (title, message, defaultValue = \"\", callback = ->) ->\n        if $(\".khaus-modal-prompt\").size() > 0\n            $(\".khaus-modal-prompt\").remove()\n        modal_D1 = $(\"<div>\", \"class\":\"modal fade khaus-modal-prompt\")\n        modal_D2 = $(\"<div>\", \"class\":\"modal-dialog\").appendTo modal_D1\n        modal_D3 = $(\"<div>\", \"class\":\"modal-content\").appendTo modal_D2\n        modal_header = $(\"<div>\", \"class\":\"modal-header\").appendTo modal_D3\n        $(\"<h4>\", \"class\":\"modal-title\").html(title).appendTo modal_header\n        modal_body = $(\"<div>\", \"class\":\"modal-body\").appendTo modal_D3\n        $(\"<h5>\").css(\"font-weight\":\"bold\").html(message).appendTo modal_body\n        input_prompt = $(\"<input>\", \"type\":\"text\", \"class\":\"form-control\").val(defaultValue).appendTo modal_body\n        modal_footer = $(\"<div>\", \"class\":\"modal-footer\").appendTo modal_D3\n        $(\"<button>\", \"type\":\"button\", \"class\":\"btn btn-default\", \"data-dismiss\":\"modal\").html(\"Cancelar\").appendTo modal_footer\n        $(\"<button>\", \"type\":\"button\", \"class\":\"btn btn-primary\", \"data-dismiss\":\"modal\")\n            .html(\"Aceptar\")\n            .on \"click\", ->\n                callback input_prompt.val()\n                return\n            .appendTo modal_footer\n        modal_D1.modal \"show\"\n        setTimeout -> \n            input_prompt.select()\n        , 200\n\n    ###\n    # ==========================================================================\n    # \n    # ==========================================================================\n    ###\n    $.khausConfirm = (title, message, callback = ->) ->\n        if $(\".khaus-modal-confirm\").size() > 0\n            $(\".khaus-modal-confirm\").remove()\n        modal_D1 = $(\"<div>\", \"class\":\"modal fade khaus-modal-confirm\")\n        modal_D2 = $(\"<div>\", \"class\":\"modal-dialog\").appendTo modal_D1\n        modal_D3 = $(\"<div>\", \"class\":\"modal-content\").appendTo modal_D2\n        modal_header = $(\"<div>\", \"class\":\"modal-header\").appendTo modal_D3\n        $(\"<h4>\", \"class\":\"modal-title\").html(title).appendTo modal_header\n        modal_body = $(\"<div>\", \"class\":\"modal-body\").html(message).appendTo modal_D3\n        modal_footer = $(\"<div>\", \"class\":\"modal-footer\").appendTo modal_D3\n        $(\"<button>\", \"type\":\"button\", \"class\":\"btn btn-default\", \"data-dismiss\":\"modal\").html(\"Cancelar\").appendTo modal_footer\n        $(\"<button>\", \"type\":\"button\", \"class\":\"btn btn-primary\", \"data-dismiss\":\"modal\")\n            .html(\"Aceptar\")\n            .on \"click\", ->\n                callback()\n                return\n            .appendTo modal_footer\n        modal_D1.modal \"show\"\n\n\n    ### CAMBIA EL FUNCIONAMIENTO DE LOS FORMULARIOS POR PETICIONES AJAX\n    # ==========================================================================\n    # \n    # ==========================================================================\n    ###\n    $.fn.khausForm = (settings)->\n        $.each @, ()->\n            form = $(@)\n            form.on 'submit', (ev)->\n                form.ajaxForm\n                    delegation: true\n                    success: (response, status, xhr, $form)->\n                        $.each response, (key, value)->\n                            if key.match /^khaus/\n                                key = key.replace('khaus', '').toLowerCase()\n                                if typeof window.khaus[key] isnt 'undefined'\n                                    window.khaus[key] = value\n                        $.khausLaunchAlerts()\n                        if window.khaus.redirect isnt \"\"\n                            if form.data('khaus-reset') || false\n                                $($form)[0].reset()\n                            if $.isArray(window.khaus.redirect)\n                                setTimeout(->\n                                    window.location = window.khaus.redirect[0]\n                                , window.khaus.redirect[1])\n                            else if $.isPlainObject(window.khaus.redirect)\n                                $.each window.khaus.redirect, (url, tiempo)->\n                                    setTimeout(->\n                                        window.location = url\n                                    , tiempo)\n                            else\n                                window.location = window.khaus.redirect\n                    error: (response, status, xhr, $form)->\n                        $.khausCleanFormErrors($form)\n                        if typeof response.responseJSON isnt 'undefined'\n                            errors = response.responseJSON\n                        else\n                            errors = $.parseJSON(response.responseText)\n                        $.khausDisplayFormErrors(\n                            errorsType: form.data('khaus-errortype') || 'block'\n                            form: $form\n                            errors: errors\n                            resetForm: form.data('khaus-reset') || false\n                        )\n\n\n\n    ###\n    # ==========================================================================\n    # \n    # ==========================================================================\n    ###\n    $.fn.khausNumberFormat = ()->\n        replace = (number)->\n            number = number.replace /[^0-9]+/g, ''\n            number = number.replace /\\B(?=(\\d{3})+(?!\\d))/g, '.'\n        @each ()->\n            if $(this).is(':input')\n                number = replace $(this).val()\n                $(this).val(number)\n            else\n                number = replace $(this).html()\n                $(this).html(number)\n\n\n    ###\n    # ==========================================================================\n    # \n    # ==========================================================================\n    ###\n    $.khausLoadSelect = ($select, url, fk, selected)->\n        $select.attr 'disabled', true\n        $select.text ''\n        $.get \"#{window.baseURL}#{url}/#{fk}.json\", (r)->\n            $.each r, ->\n                $('<option>', value:@id).text(@nombre).appendTo $select\n            $select.removeAttr 'disabled'\n            if $select.find(\"option[value=#{selected}]\").size() > 0\n                $select.val selected\n            else\n                $select.val($select.find('option:first').attr('value'))\n\n    $.fn.khausLoadSelect = (settings)->\n        o = $.extend\n            url : $(@).data 'khaus-url'\n            select : $(@).data 'khaus-select'\n            selected : $(@).data 'khaus-selected' or 1\n        , settings\n        @each ->\n            $select = $(o.select)\n            if @value\n                $.khausLoadSelect $select, o.url, @value, o.selected\n            else\n                $select.text ''\n                $select.attr 'disabled', true\n            $(@).on 'change', ->\n                $.khausLoadSelect $select, o.url, @value, o.selected\n\n    ###\n    # ==========================================================================\n    # \n    # ==========================================================================\n    ###\n    $.fn.khausClone = ->\n        @each ->\n            $(@).on 'click', (ev)->\n                ev.preventDefault()\n                selector = $(@).data 'khaus-clone'\n                target = $(selector).last()\n                clon = target.clone()\n                clon.find(':input[name]').each ->\n                    name = $(@).attr('name')\n                    key = name.match(/\\[(\\d+)\\]/)\n                    if !!key\n                        key = parseInt key[1]\n                        newName = name.replace \"[#{key}]\", \"[#{key+1}]\"\n                        $(@).attr 'name', newName\n                clon.find('input').val ''\n                clon.find('select option:first').attr 'selected', true\n                clon.find(':button[data-khaus-removeparent]').khausRemoveParent()\n                clon.insertAfter target\n\n\n    ###\n    # ==========================================================================\n    # \n    # ==========================================================================\n    ###\n    $.fn.khausRemoveParent = ->\n        @each ->\n            $(@).on 'click', (ev)->\n                ev.preventDefault()\n                selector = $(@).data 'khaus-removeparent'\n                target = $(this).parents(selector)\n                target.remove()\n\n    \n\n$(document).ready ->\n    $('form').khausAttachName()\n    $.khausLaunchFormErrors()\n    $.khausLaunchAlerts()\n    $('form.khaus-form').khausForm()\n    $('form[data-khaus-confirm]').khausConfirmBeforeSubmit()\n    $(':button[data-khaus-clone]').khausClone()\n    $(':button[data-khaus-removeparent]').khausRemoveParent()\n    $(':button[data-khaus-alert]').khausAlert()\n    $('.khaus-numero').khausNumberFormat()\n    $('select[data-khaus-select]').khausLoadSelect();","(function($) {\n\n  /* MULTIUPLOADER DE IMAGENES\n   * ==========================================================================\n   * Transforma un input file en un uploader multiple de imagenes con preview\n   * ==========================================================================\n   */\n  $.fn.khausImageUploader = function() {\n    return $.each(this, function(key, div) {\n      var images, input, inputName;\n      images = $(div).find('img.khaus-uploaded-thumb');\n      images.on('click', function() {\n        var filename;\n        filename = $(this).attr('src').split('/').pop();\n        $('<input>', {\n          type: 'hidden',\n          name: 'khaus_delete_thumb[]',\n          value: filename\n        }).appendTo(div);\n        return $(this).remove();\n      });\n      input = $(div).find(':input[type=file]');\n      inputName = input.attr('name');\n      input.removeAttr('name');\n      return input.on('change', function(ev) {\n        if ($(this).val()) {\n          $.each(ev.target.files, function(key, value) {\n            var reader;\n            if (value.type.match('image.*')) {\n              reader = new FileReader();\n              reader.onload = (function(file) {\n                return function(e) {\n                  var id;\n                  id = btoa($.now());\n                  id = id.replace(/[^a-z]+/ig, '');\n                  $('<input>', {\n                    'class': id,\n                    'type': 'hidden',\n                    'name': inputName + '[]',\n                    'value': e.target.result\n                  }).prependTo(div);\n                  return $('<img>', {\n                    'class': 'khaus-upload-thumb',\n                    'src': e.target.result\n                  }).on('click', function() {\n                    $('input.' + id + '').remove();\n                    return $(this).remove();\n                  }).prependTo(div);\n                };\n              })(value);\n            }\n            return reader.readAsDataURL(value);\n          });\n          return $(this).val('');\n        }\n      });\n    });\n  };\n\n  /* LIMPIA LOS ERRORES DEL FORMULARIO BOOTSTRAP\n   * ==========================================================================\n   * @param DOMElement form - formulario\n   * ==========================================================================\n   */\n  $.khausCleanFormErrors = function(form) {\n    $(form).find(\".form-group\").removeClass(\"has-error has-feedback\");\n    $(form).find(\"span.form-control-feedback\").remove();\n    $(form).find(\"span.help-block\").remove();\n    return $(form).find(\":input\").tooltip(\"destroy\");\n  };\n\n  /* DESPLIEGA LOS ERRORES DE FORMULARIO\n   * ==========================================================================\n   * @param string type (block|tooltip) forma de mostrar errores\n   * @param DOMElement form - formulario que realizo el envio\n   * @param object errors - errores {'inputName':'Error Message'}\n  #\n   * En caso de que no se envie el parametro errors, buscara esos datos\n   * dentro de la variable global khaus\n   * ==========================================================================\n   */\n  $.khausDisplayFormErrors = function(settings) {\n    var counter, o;\n    o = $.extend({\n      errorsType: 'block',\n      form: null,\n      errors: window.khaus.errors,\n      resetForm: false\n    }, settings);\n    counter = 0;\n    $.each(o.errors, function(key, value) {\n      var badge, inTab, input, page, pageName, tab;\n      if (key.match(/^khaus/)) {\n        key = key.replace('khaus', '').toLowerCase();\n        if (typeof window.khaus[key] !== 'undefined') {\n          window.khaus[key] = value;\n          return true;\n        }\n      }\n      counter++;\n      input = $(o.form).find(\":input[name=\" + key + \"]\");\n      if (input.size() !== 1) {\n        input = $(o.form).find(\":input[name^='\" + key + \"[']\");\n      }\n      input.parents('.form-group').addClass(\"has-error\");\n      inTab = input.parents('.tab-content');\n      if (inTab.size() > 0) {\n        if (counter === 1) {\n          $('ul.nav-tabs .badge').remove();\n        }\n        page = input.parents('.tab-pane');\n        pageName = page.attr('id');\n        tab = $(\"ul.nav-tabs a[href=#\" + pageName + \"]\");\n        badge = tab.find('.badge');\n        if (badge.length === 0) {\n          badge = $('<span>', {\n            'class': 'badge'\n          }).text(0);\n          badge.appendTo(tab);\n        }\n        badge.text(parseInt(badge.text()) + 1);\n      }\n      switch (o.errorsType) {\n        case 'block':\n          return $(\"<span>\", {\n            \"class\": \"help-block\"\n          }).html(value).insertAfter(input);\n        case 'tooltip':\n          return input.tooltip({\n            placement: \"top\",\n            title: value,\n            container: \"body\"\n          });\n      }\n    });\n    $.khausLaunchAlerts();\n    if (counter === 0) {\n      if (o.resetForm) {\n        return $(o.form)[0].reset();\n      }\n    }\n  };\n\n  /* DESPLEGA UNA ALARTA O NOTIFICACION FLOTANTE\n   * ==========================================================================\n   * @param string title - titulo de la notificacion\n   * @param string message - mensaje de la notificacion\n   * @param object settings {\n   *   delay : (int) tiempo en milisegundos que permanecera la alerta en pantalla\n   *   template : (string) apariencia bootstrap default|primary|success|info|danger|warning\n   *   icon : (string) icono de la alerta req. Font Awesome ex: fa-plus\n   * }\n   * ==========================================================================\n   */\n  $.khausNotify = function(title, message, settings) {\n    var container, icon, icon_cont, message_cont, message_title, notify, o;\n    o = $.extend({\n      delay: 10000,\n      template: \"default\",\n      icon: null\n    }, settings);\n    container = $(\".khaus-notify-container\");\n    if (container.size() === 0) {\n      container = $(\"<div>\", {\n        \"class\": \"khaus-notify-container\"\n      }).prependTo(\"body\");\n    }\n    notify = $(\"<div>\", {\n      \"class\": \"khaus-notify khaus-notify-\" + o.template\n    });\n    if (o.icon !== null) {\n      icon = $(\"<i>\", {\n        \"class\": \"fa fa-fw \" + o.icon\n      });\n      icon_cont = $(\"<div>\", {\n        \"class\": \"icon-container\"\n      }).html(icon);\n      notify.append(icon_cont);\n    }\n    message_cont = $(\"<div>\", {\n      \"class\": \"text-container\"\n    });\n    message_title = $(\"<div>\", {\n      \"class\": \"title\"\n    }).html(title).appendTo(message_cont);\n    message = $(\"<div>\").html(message).appendTo(message_cont);\n    notify.append(message_cont);\n    notify.appendTo(container);\n    notify.on(\"click\", function() {\n      $(this).removeClass(\"khaus-notify-show\");\n      $(this).addClass(\"khaus-notify-hide\");\n      return $(this).one(\"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend\", function() {\n        return $(this).remove();\n      });\n    });\n    return setTimeout(function() {\n      notify.addClass(\"khaus-notify-show\");\n      return setTimeout(function() {\n        return notify.trigger(\"click\");\n      }, o.delay);\n    }, 1);\n  };\n\n  /* MUESTRA LOS ERRORES ALMACENADOS EN LAS VARIABLES KHAUS\n   * ==========================================================================\n   * \n   * ==========================================================================\n   */\n  $.khausLaunchFormErrors = function() {\n    var form;\n    if (!!window.khaus.errors && !!window.khaus.form) {\n      form = $(\"form[name=\" + window.khaus.form + \"]\");\n      return $.khausDisplayFormErrors({\n        errorsType: 'block',\n        form: form\n      });\n    }\n  };\n\n  /*\n   * ==========================================================================\n   * \n   * ==========================================================================\n   */\n  $.khausLaunchAlerts = function(settings) {\n    var o;\n    o = $.extend({\n      title: {\n        \"default\": \"\",\n        primary: \"\",\n        success: \"El proceso ha finalizado\",\n        danger: \"Ha ocurrido un error\",\n        warning: \"Importante\",\n        info: \"Informaci&oacute;n\"\n      }\n    }, settings);\n    return $.each(o.title, function(key, value) {\n      if (!!window.khaus[key]) {\n        if ($.isArray(window.khaus[key])) {\n          $.khausNotify(window.khaus[key][0], window.khaus[key][1], {\n            template: key\n          });\n        } else if ($.isPlainObject(window.khaus[key])) {\n          $.each(window.khaus[key], function(titulo, mensaje) {\n            return $.khausNotify(titulo, mensaje, {\n              template: key\n            });\n          });\n        } else {\n          $.khausNotify(value, window.khaus[key], {\n            template: key\n          });\n        }\n        return window.khaus[key] = '';\n      }\n    });\n  };\n\n  /*\n   * ==========================================================================\n   * \n   * ==========================================================================\n   */\n  $.khausAjaxWait = function(settings) {\n    var o;\n    o = $.extend({\n      type: 'cursor'\n    }, settings);\n    switch (o.type) {\n      case 'cursor':\n        return $.ajaxSetup({\n          beforeSend: function() {\n            return $('body').addClass('khaus-ajax-wait');\n          },\n          complete: function() {\n            return $('body').removeClass('khaus-ajax-wait');\n          },\n          success: function() {\n            return $('body').removeClass('khaus-ajax-wait');\n          }\n        });\n    }\n  };\n\n  /* ADJUNTA AL FORMULARIO EL PARAMETRO NAME\n   * ==========================================================================\n   * Si el formulario tiene el atributo [name] activado \n   * antes de realizar el envio de los parametros\n   * agrega un input hidden name=\"_name\" value=\"<nombre del formulario>\"\n   * ==========================================================================\n   */\n  $.fn.khausAttachName = function() {\n    return $.each(this, function() {\n      return $(this).on('submit', function(ev) {\n        if ($(this).is('[name]') && $(this).find('input[name=_name]').size() === 0) {\n          return $('<input>', {\n            'name': '_name',\n            'type': 'hidden',\n            'value': $(this).attr('name')\n          }).prependTo($(this));\n        }\n      });\n    });\n  };\n\n  /* CAPTURA EL EVENTO SUBMIT Y ENVIA UN MODAL KHAUS CONFIRM\n   * ==========================================================================\n   * @param object settings {\n   *   title : (string) - titulo de la ventana modal\n   *   message : (string) - mensaje de la ventana modal\n   * }\n   * Al presionar el boton aceptar del modal se realizara el submit del formulario\n   * de lo contrario no se realizara ninguna accion\n   * ==========================================================================\n   */\n  $.fn.khausConfirmBeforeSubmit = function() {\n    return $.each(this, function() {\n      var message, title;\n      title = $(this).data('khaus-title' || '');\n      message = $(this).data('khaus-confirm' || '');\n      return $(this).on('submit', function(ev) {\n        var e;\n        ev.preventDefault();\n        e = $(this);\n        return $.khausConfirm(title, message, function() {\n          e.off('submit');\n          return e.submit();\n        });\n      });\n    });\n  };\n\n  /* \n   * ==========================================================================\n   * Envia un modal de alerta con las opciones aceptar y cancelar\n   * Metodos de llamada:\n   * - por codigo: $.khausAlert('Titulo', 'Mensaje');\n   * - por dom: <button data-khaus-alert=\"Mensaje\" data-khaus-title=\"Opcional\">\n   * El titulo es opcional en la llamada por dom\n   * ==========================================================================\n   */\n  $.khausAlert = function(title, message) {\n    var modal_D1, modal_D2, modal_D3, modal_body, modal_footer, modal_header;\n    if ($(\".khaus-modal-alert\").size() > 0) {\n      $(\".khaus-modal-alert\").remove();\n    }\n    modal_D1 = $(\"<div>\", {\n      \"class\": \"modal fade khaus-modal-alert\"\n    });\n    modal_D2 = $(\"<div>\", {\n      \"class\": \"modal-dialog\"\n    }).appendTo(modal_D1);\n    modal_D3 = $(\"<div>\", {\n      \"class\": \"modal-content\"\n    }).appendTo(modal_D2);\n    modal_header = $(\"<div>\", {\n      \"class\": \"modal-header\"\n    }).appendTo(modal_D3);\n    $(\"<h4>\", {\n      \"class\": \"modal-title\"\n    }).html(title).appendTo(modal_header);\n    modal_body = $(\"<div>\", {\n      \"class\": \"modal-body\"\n    }).html(message).appendTo(modal_D3);\n    modal_footer = $(\"<div>\", {\n      \"class\": \"modal-footer\"\n    }).appendTo(modal_D3);\n    $(\"<button>\", {\n      \"type\": \"button\",\n      \"class\": \"btn btn-primary\",\n      \"data-dismiss\": \"modal\"\n    }).html(\"Aceptar\").appendTo(modal_footer);\n    return modal_D1.modal(\"show\");\n  };\n  $.fn.khausAlert = function() {\n    return this.each(function() {\n      return $(this).on('click', function(ev) {\n        var message, title;\n        message = $(this).data('khaus-alert');\n        title = $(this).data('khaus-title' || '');\n        return $.khausAlert(title, message);\n      });\n    });\n  };\n\n  /*\n   * ==========================================================================\n   * \n   * ==========================================================================\n   */\n  $.khausPrompt = function(title, message, defaultValue, callback) {\n    var input_prompt, modal_D1, modal_D2, modal_D3, modal_body, modal_footer, modal_header;\n    if (defaultValue == null) {\n      defaultValue = \"\";\n    }\n    if (callback == null) {\n      callback = function() {};\n    }\n    if ($(\".khaus-modal-prompt\").size() > 0) {\n      $(\".khaus-modal-prompt\").remove();\n    }\n    modal_D1 = $(\"<div>\", {\n      \"class\": \"modal fade khaus-modal-prompt\"\n    });\n    modal_D2 = $(\"<div>\", {\n      \"class\": \"modal-dialog\"\n    }).appendTo(modal_D1);\n    modal_D3 = $(\"<div>\", {\n      \"class\": \"modal-content\"\n    }).appendTo(modal_D2);\n    modal_header = $(\"<div>\", {\n      \"class\": \"modal-header\"\n    }).appendTo(modal_D3);\n    $(\"<h4>\", {\n      \"class\": \"modal-title\"\n    }).html(title).appendTo(modal_header);\n    modal_body = $(\"<div>\", {\n      \"class\": \"modal-body\"\n    }).appendTo(modal_D3);\n    $(\"<h5>\").css({\n      \"font-weight\": \"bold\"\n    }).html(message).appendTo(modal_body);\n    input_prompt = $(\"<input>\", {\n      \"type\": \"text\",\n      \"class\": \"form-control\"\n    }).val(defaultValue).appendTo(modal_body);\n    modal_footer = $(\"<div>\", {\n      \"class\": \"modal-footer\"\n    }).appendTo(modal_D3);\n    $(\"<button>\", {\n      \"type\": \"button\",\n      \"class\": \"btn btn-default\",\n      \"data-dismiss\": \"modal\"\n    }).html(\"Cancelar\").appendTo(modal_footer);\n    $(\"<button>\", {\n      \"type\": \"button\",\n      \"class\": \"btn btn-primary\",\n      \"data-dismiss\": \"modal\"\n    }).html(\"Aceptar\").on(\"click\", function() {\n      callback(input_prompt.val());\n    }).appendTo(modal_footer);\n    modal_D1.modal(\"show\");\n    return setTimeout(function() {\n      return input_prompt.select();\n    }, 200);\n  };\n\n  /*\n   * ==========================================================================\n   * \n   * ==========================================================================\n   */\n  $.khausConfirm = function(title, message, callback) {\n    var modal_D1, modal_D2, modal_D3, modal_body, modal_footer, modal_header;\n    if (callback == null) {\n      callback = function() {};\n    }\n    if ($(\".khaus-modal-confirm\").size() > 0) {\n      $(\".khaus-modal-confirm\").remove();\n    }\n    modal_D1 = $(\"<div>\", {\n      \"class\": \"modal fade khaus-modal-confirm\"\n    });\n    modal_D2 = $(\"<div>\", {\n      \"class\": \"modal-dialog\"\n    }).appendTo(modal_D1);\n    modal_D3 = $(\"<div>\", {\n      \"class\": \"modal-content\"\n    }).appendTo(modal_D2);\n    modal_header = $(\"<div>\", {\n      \"class\": \"modal-header\"\n    }).appendTo(modal_D3);\n    $(\"<h4>\", {\n      \"class\": \"modal-title\"\n    }).html(title).appendTo(modal_header);\n    modal_body = $(\"<div>\", {\n      \"class\": \"modal-body\"\n    }).html(message).appendTo(modal_D3);\n    modal_footer = $(\"<div>\", {\n      \"class\": \"modal-footer\"\n    }).appendTo(modal_D3);\n    $(\"<button>\", {\n      \"type\": \"button\",\n      \"class\": \"btn btn-default\",\n      \"data-dismiss\": \"modal\"\n    }).html(\"Cancelar\").appendTo(modal_footer);\n    $(\"<button>\", {\n      \"type\": \"button\",\n      \"class\": \"btn btn-primary\",\n      \"data-dismiss\": \"modal\"\n    }).html(\"Aceptar\").on(\"click\", function() {\n      callback();\n    }).appendTo(modal_footer);\n    return modal_D1.modal(\"show\");\n  };\n\n  /* CAMBIA EL FUNCIONAMIENTO DE LOS FORMULARIOS POR PETICIONES AJAX\n   * ==========================================================================\n   * \n   * ==========================================================================\n   */\n  $.fn.khausForm = function(settings) {\n    return $.each(this, function() {\n      var form;\n      form = $(this);\n      return form.on('submit', function(ev) {\n        return form.ajaxForm({\n          delegation: true,\n          success: function(response, status, xhr, $form) {\n            $.each(response, function(key, value) {\n              if (key.match(/^khaus/)) {\n                key = key.replace('khaus', '').toLowerCase();\n                if (typeof window.khaus[key] !== 'undefined') {\n                  return window.khaus[key] = value;\n                }\n              }\n            });\n            $.khausLaunchAlerts();\n            if (window.khaus.redirect !== \"\") {\n              if (form.data('khaus-reset') || false) {\n                $($form)[0].reset();\n              }\n              if ($.isArray(window.khaus.redirect)) {\n                return setTimeout(function() {\n                  return window.location = window.khaus.redirect[0];\n                }, window.khaus.redirect[1]);\n              } else if ($.isPlainObject(window.khaus.redirect)) {\n                return $.each(window.khaus.redirect, function(url, tiempo) {\n                  return setTimeout(function() {\n                    return window.location = url;\n                  }, tiempo);\n                });\n              } else {\n                return window.location = window.khaus.redirect;\n              }\n            }\n          },\n          error: function(response, status, xhr, $form) {\n            var errors;\n            $.khausCleanFormErrors($form);\n            if (typeof response.responseJSON !== 'undefined') {\n              errors = response.responseJSON;\n            } else {\n              errors = $.parseJSON(response.responseText);\n            }\n            return $.khausDisplayFormErrors({\n              errorsType: form.data('khaus-errortype') || 'block',\n              form: $form,\n              errors: errors,\n              resetForm: form.data('khaus-reset') || false\n            });\n          }\n        });\n      });\n    });\n  };\n\n  /*\n   * ==========================================================================\n   * \n   * ==========================================================================\n   */\n  $.fn.khausNumberFormat = function() {\n    var replace;\n    replace = function(number) {\n      number = number.replace(/[^0-9]+/g, '');\n      return number = number.replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\n    };\n    return this.each(function() {\n      var number;\n      if ($(this).is(':input')) {\n        number = replace($(this).val());\n        return $(this).val(number);\n      } else {\n        number = replace($(this).html());\n        return $(this).html(number);\n      }\n    });\n  };\n\n  /*\n   * ==========================================================================\n   * \n   * ==========================================================================\n   */\n  $.khausLoadSelect = function($select, url, fk, selected) {\n    $select.attr('disabled', true);\n    $select.text('');\n    return $.get(\"\" + window.baseURL + url + \"/\" + fk + \".json\", function(r) {\n      $.each(r, function() {\n        return $('<option>', {\n          value: this.id\n        }).text(this.nombre).appendTo($select);\n      });\n      $select.removeAttr('disabled');\n      if ($select.find(\"option[value=\" + selected + \"]\").size() > 0) {\n        return $select.val(selected);\n      } else {\n        return $select.val($select.find('option:first').attr('value'));\n      }\n    });\n  };\n  $.fn.khausLoadSelect = function(settings) {\n    var o;\n    o = $.extend({\n      url: $(this).data('khaus-url'),\n      select: $(this).data('khaus-select'),\n      selected: $(this).data('khaus-selected' || 1)\n    }, settings);\n    return this.each(function() {\n      var $select;\n      $select = $(o.select);\n      if (this.value) {\n        $.khausLoadSelect($select, o.url, this.value, o.selected);\n      } else {\n        $select.text('');\n        $select.attr('disabled', true);\n      }\n      return $(this).on('change', function() {\n        return $.khausLoadSelect($select, o.url, this.value, o.selected);\n      });\n    });\n  };\n\n  /*\n   * ==========================================================================\n   * \n   * ==========================================================================\n   */\n  $.fn.khausClone = function() {\n    return this.each(function() {\n      return $(this).on('click', function(ev) {\n        var clon, selector, target;\n        ev.preventDefault();\n        selector = $(this).data('khaus-clone');\n        target = $(selector).last();\n        clon = target.clone();\n        clon.find(':input[name]').each(function() {\n          var key, name, newName;\n          name = $(this).attr('name');\n          key = name.match(/\\[(\\d+)\\]/);\n          if (!!key) {\n            key = parseInt(key[1]);\n            newName = name.replace(\"[\" + key + \"]\", \"[\" + (key + 1) + \"]\");\n            return $(this).attr('name', newName);\n          }\n        });\n        clon.find('input').val('');\n        clon.find('select option:first').attr('selected', true);\n        clon.find(':button[data-khaus-removeparent]').khausRemoveParent();\n        return clon.insertAfter(target);\n      });\n    });\n  };\n\n  /*\n   * ==========================================================================\n   * \n   * ==========================================================================\n   */\n  return $.fn.khausRemoveParent = function() {\n    return this.each(function() {\n      return $(this).on('click', function(ev) {\n        var selector, target;\n        ev.preventDefault();\n        selector = $(this).data('khaus-removeparent');\n        target = $(this).parents(selector);\n        return target.remove();\n      });\n    });\n  };\n})(jQuery);\n\n$(document).ready(function() {\n  $('form').khausAttachName();\n  $.khausLaunchFormErrors();\n  $.khausLaunchAlerts();\n  $('form.khaus-form').khausForm();\n  $('form[data-khaus-confirm]').khausConfirmBeforeSubmit();\n  $(':button[data-khaus-clone]').khausClone();\n  $(':button[data-khaus-removeparent]').khausRemoveParent();\n  $(':button[data-khaus-alert]').khausAlert();\n  $('.khaus-numero').khausNumberFormat();\n  return $('select[data-khaus-select]').khausLoadSelect();\n});\n"],"sourceRoot":"/source/"}