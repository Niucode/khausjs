!function(t){return t.khausCleanFormErrors=function(e){return t(e).find(".form-group").removeClass("has-error has-feedback"),t(e).find("span.form-control-feedback").remove(),t(e).find("span.help-block").remove(),t(e).find("span.form-control-feedback").remove(),t(e).find(":input").tooltip("destroy")},t.khausDisplayFormErrors=function(e){var a,n;return n=t.extend({errorsType:"block",form:null,errors:window.khaus.errors,resetForm:!1},e),a=0,t.each(n.errors,function(e,o){var r,s,u,i,d,l,c,h;if(e.match(/^khaus/)&&(e=e.replace("khaus","").toLowerCase(),"undefined"!=typeof window.khaus[e]))return window.khaus[e]=o,!0;switch((r=e.match(/\.([^.]+)/))&&(e=e.replace(r[0],"["+r[1]+"]")),a++,i=t(n.form).find(":input[name='"+e+"']"),i.parents(".form-group").addClass("has-error"),i.parents(".form-group").addClass("has-feedback"),u=i.parents(".tab-content"),u.length>0&&(1===a&&t("ul.nav-tabs .badge").remove(),d=i.parents(".tab-pane"),l=d.attr("id"),h=t("ul.nav-tabs a[href=#"+l+"]"),s=h.find(".badge"),0===s.length&&(s=t("<span>",{"class":"badge"}).text(0),s.appendTo(h)),s.text(parseInt(s.text())+1)),n.errorsType){case"block":return c=i.parents(".form-group"),t("<span>",{"class":"help-block"}).html(o).appendTo(c),t("<span>",{"class":"glyphicon glyphicon-remove form-control-feedback"}).appendTo(c);case"tooltip":return i.tooltip({placement:"top",title:o,container:"body"})}}),t.khausLaunchAlerts(),0===a&&n.resetForm?t(n.form)[0].reset():void 0},t.khausLaunchFormErrors=function(){var e;return window.khaus.errors&&window.khaus.form?(e=t("form[name="+window.khaus.form+"]"),t.khausDisplayFormErrors({errorsType:"block",form:e})):void 0},t.khausLaunchAlerts=function(e){var a;return a=t.extend({title:{"default":"",primary:"",success:"El proceso ha finalizado",danger:"Ha ocurrido un error",warning:"Importante",info:"Informaci&oacute;n"}},e),t.each(a.title,function(e,a){var n;return window.khaus[e]?(n=e,"default"===e&&(n="alert"),"danger"===e&&(n="error"),"info"===e&&(n="info"),t.isPlainObject(window.khaus[e])||t.isArray(window.khaus[e])?t.each(window.khaus[e],function(t,e){return new Noty({text:e,type:n}).show()}):new Noty({text:window.khaus[e],type:n}).show(),window.khaus[e]=""):void 0})},t.khausAjaxWait=function(e){var a;switch(a=t.extend({type:"cursor"},e),a.type){case"cursor":return t.ajaxSetup({beforeSend:function(){return t("body").addClass("khaus-ajax-wait")},complete:function(){return t("body").removeClass("khaus-ajax-wait")},success:function(){return t("body").removeClass("khaus-ajax-wait")}})}},t.fn.khausAttachName=function(){return t.each(this,function(){return t(this).on("submit",function(e){return t(this).is("[name]")&&0===t(this).find("input[name=_name]").length?t("<input>",{name:"_name",type:"hidden",value:t(this).attr("name")}).prependTo(t(this)):void 0})})},t.fn.khausConfirmBeforeSubmit=function(){return t.each(this,function(){var e,a;return a=t(this).data("khaus-title"),e=t(this).data("khaus-confirm"),t(this).on("submit",function(n){var o;return t(":focus").blur(),n.preventDefault(),o=t(this),t.khausConfirm(a,e,function(){return o.off("submit"),o.submit()})})})},t.khausAlert=function(e,a){var n,o,r,s,u,i;return t(".khaus-modal-alert").length>0&&t(".khaus-modal-alert").remove(),n=t("<div>",{"class":"modal fade khaus-modal-alert"}),o=t("<div>",{"class":"modal-dialog"}).appendTo(n),r=t("<div>",{"class":"modal-content"}).appendTo(o),i=t("<div>",{"class":"modal-header"}).appendTo(r),t("<h4>",{"class":"modal-title"}).html(e).appendTo(i),s=t("<div>",{"class":"modal-body"}).html(a).appendTo(r),u=t("<div>",{"class":"modal-footer"}).appendTo(r),t("<button>",{type:"button","class":"btn btn-primary","data-dismiss":"modal"}).html("Aceptar").appendTo(u),n.modal("show")},t.fn.khausAlert=function(){return this.each(function(){return t(this).on("click",function(e){var a,n;return a=t(this).data("khaus-alert"),n=t(this).data("khaus-title"),t.khausAlert(n,a)})})},t.khausPrompt=function(e,a,n,o){var r,s,u,i,d,l,c;return null==n&&(n=""),null==o&&(o=function(){}),t(".khaus-modal-prompt").length>0&&t(".khaus-modal-prompt").remove(),s=t("<div>",{"class":"modal fade khaus-modal-prompt"}),u=t("<div>",{"class":"modal-dialog"}).appendTo(s),i=t("<div>",{"class":"modal-content"}).appendTo(u),c=t("<div>",{"class":"modal-header"}).appendTo(i),t("<h4>",{"class":"modal-title"}).html(e).appendTo(c),d=t("<div>",{"class":"modal-body"}).appendTo(i),t("<h5>").css({"font-weight":"bold"}).html(a).appendTo(d),r=t("<input>",{type:"text","class":"form-control"}).val(n).appendTo(d),l=t("<div>",{"class":"modal-footer"}).appendTo(i),t("<button>",{type:"button","class":"btn btn-default","data-dismiss":"modal"}).html("Cancelar").appendTo(l),t("<button>",{type:"button","class":"btn btn-primary","data-dismiss":"modal"}).html("Aceptar").on("click",function(){o(r.val())}).appendTo(l),s.modal("show"),setTimeout(function(){return r.select()},200)},t.khausConfirm=function(e,a,n){var o,r,s,u,i,d,l;return null==n&&(n=function(){}),t(".khaus-modal-confirm").length>0&&t(".khaus-modal-confirm").remove(),r=t("<div>",{"class":"modal fade khaus-modal-confirm"}),s=t("<div>",{"class":"modal-dialog"}).appendTo(r),u=t("<div>",{"class":"modal-content"}).appendTo(s),l=t("<div>",{"class":"modal-header"}).appendTo(u),t("<h4>",{"class":"modal-title"}).html(e).appendTo(l),i=t("<div>",{"class":"modal-body"}).html(a).appendTo(u),d=t("<div>",{"class":"modal-footer"}).appendTo(u),t("<button>",{type:"button","class":"btn btn-default","data-dismiss":"modal"}).html("Cancelar").appendTo(d),o=t("<button>",{type:"button","class":"btn btn-primary","data-dismiss":"modal"}).html("Aceptar").on("click",function(){n()}).appendTo(d),setTimeout(function(){return o.focus()},300),r.modal("show")},t.fn.khausForm=function(e){var a;return a=t.extend({onSubmit:function(){},onSuccess:function(){},onError:function(){}},e),t.each(this,function(){var e;return e=t(this),e.on("submit",function(n){return a.onSubmit(e,n),e.ajaxForm({delegation:!0,success:function(o,r,s,u){var i;return t.each(o,function(t,e){return t.match(/^khaus/)&&(t=t.replace("khaus","").toLowerCase(),"undefined"!=typeof window.khaus[t])?window.khaus[t]=e:void 0}),t.khausLaunchAlerts(),null!==window.khaus.redirect&&(e.data("khaus-reset")&&t(u)[0].reset(),t.isArray(window.khaus.redirect)?setTimeout(function(){var t;return t=window.khaus.redirect[0],t.match(/^https?:\/\//i)||(t=window.baseURL+t),window.location=t},window.khaus.redirect[1]):t.isPlainObject(window.khaus.redirect)?t.each(window.khaus.redirect,function(t,e){return setTimeout(function(){var e;return e=t,e.match(/^https?:\/\//i)||(e=window.baseURL+e),window.location=e},e)}):(i=window.khaus.redirect,i.match(/^https?:\/\//i)||(i=window.baseURL+i),window.location=i)),a.onSuccess(u,n,o)},error:function(o,r,s,u){var i;return t.khausCleanFormErrors(u),i="undefined"!=typeof o.responseJSON?o.responseJSON:t.parseJSON(o.responseText),i.message&&new Noty({text:i.message,type:"error"}).show(),t.khausDisplayFormErrors({errorsType:e.data("khaus-errortype")||"block",form:u,errors:i.errors,resetForm:e.data("khaus-reset")||!1}),a.onError(u,n,o)}})})})},t.fn.khausNumberFormat=function(){var e;return e=function(t){return t=t.replace(/[^0-9]+/g,""),t=t.replace(/\B(?=(\d{3})+(?!\d))/g,".")},this.each(function(){var a;return t(this).is(":input")?(a=e(t(this).val()),t(this).val(a)):(a=e(t(this).html()),t(this).html(a))})},t.khausLoadSelect=function(e,a,n,o){return e.attr("disabled",!0),e.text(""),t.get(""+window.baseURL+a+"/"+n+".json",function(a){return t.each(a,function(){return t("<option>",{value:this.id}).text(this.nombre).appendTo(e)}),e.removeAttr("disabled"),e.val(e.find("option[value="+o+"]").length>0?o:e.find("option:first").attr("value"))})},t.fn.khausLoadSelect=function(e){var a;return a=t.extend({url:t(this).data("khaus-url"),select:t(this).data("khaus-select"),selected:t(this).data("khaus-selected")},e),this.each(function(){var e;return e=t(a.select),this.value?t.khausLoadSelect(e,a.url,this.value,a.selected):(e.text(""),e.attr("disabled",!0)),t(this).on("change",function(){return t.khausLoadSelect(e,a.url,this.value,a.selected)})})},t.fn.khausClone=function(){return this.each(function(){return t(this).on("click",function(e){var a,n,o;return e.preventDefault(),n=t(this).data("khaus-clone"),o=t(n).last(),a=o.clone(),a.find(":input[name]").each(function(){var e,a,n;return a=t(this).attr("name"),e=a.match(/\[(\d+)\]/),e?(e=parseInt(e[1]),n=a.replace("["+e+"]","["+(e+1)+"]"),t(this).attr("name",n)):void 0}),a.find("input").val(""),a.find("select option:first").attr("selected",!0),a.find(":button[data-khaus-removeparent]").khausRemoveParent(),a.insertAfter(o)})})},t.fn.khausRemoveParent=function(){return this.each(function(){return t(this).on("click",function(e){var a,n;return e.preventDefault(),a=t(this).data("khaus-removeparent"),n=t(this).parents(a),n.remove()})})}}(jQuery),$(function(){return Noty.overrideDefaults({layout:"bottomRight",theme:"metroui",timeout:8e3,closeWith:["click","button"],animation:{open:"animated bounceInRight",close:"animated bounceOutRight"}}),$("form").khausAttachName(),$.khausLaunchFormErrors(),$.khausLaunchAlerts(),$("form.khaus-form").khausForm(),$("form[data-khaus-confirm]").khausConfirmBeforeSubmit(),$(":button[data-khaus-clone]").khausClone(),$(":button[data-khaus-removeparent]").khausRemoveParent(),$(":button[data-khaus-alert]").khausAlert(),$(".khaus-numero").khausNumberFormat(),$("select[data-khaus-select]").khausLoadSelect()});
//# sourceMappingURL=khausjs.min.js.map
