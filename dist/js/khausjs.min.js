!function(t){return t.fn.khausImageUploader=function(){return t.each(this,function(e,a){var n,r,o;return n=t(a).find("img.khaus-uploaded-thumb"),n.on("click",function(){var e;return e=t(this).attr("src").split("/").pop(),t("<input>",{type:"hidden",name:"khaus_delete_thumb[]",value:e}).appendTo(a),t(this).remove()}),r=t(a).find(":input[type=file]"),o=r.attr("name"),r.removeAttr("name"),r.on("change",function(e){return t(this).val()?(t.each(e.target.files,function(e,n){var r;return n.type.match("image.*")&&(r=new FileReader,r.onload=function(e){return function(e){var n;return n=btoa(t.now()),n=n.replace(/[^a-z]+/gi,""),t("<input>",{"class":n,type:"hidden",name:o+"[]",value:e.target.result}).prependTo(a),t("<img>",{"class":"khaus-upload-thumb",src:e.target.result}).on("click",function(){return t("input."+n).remove(),t(this).remove()}).prependTo(a)}}(n)),r.readAsDataURL(n)}),t(this).val("")):void 0})})},t.khausCleanFormErrors=function(e){return t(e).find(".form-group").removeClass("has-error has-feedback"),t(e).find("span.form-control-feedback").remove(),t(e).find("span.help-block").remove(),t(e).find(":input").tooltip("destroy")},t.khausDisplayFormErrors=function(e){var a,n;return n=t.extend({errorsType:"block",form:null,errors:window.khaus.errors,resetForm:!1},e),a=0,t.each(n.errors,function(e,r){var o,s,i,u,d,l;if(e.match(/^khaus/)&&(e=e.replace("khaus","").toLowerCase(),"undefined"!=typeof window.khaus[e]))return window.khaus[e]=r,!0;switch(a++,i=t(n.form).find(":input[name="+e+"]"),1!==i.size()&&(i=t(n.form).find(":input[name^='"+e+"[']")),i.parents(".form-group").addClass("has-error"),s=i.parents(".tab-content"),s.size()>0&&(1===a&&t("ul.nav-tabs .badge").remove(),u=i.parents(".tab-pane"),d=u.attr("id"),l=t("ul.nav-tabs a[href=#"+d+"]"),o=l.find(".badge"),0===o.length&&(o=t("<span>",{"class":"badge"}).text(0),o.appendTo(l)),o.text(parseInt(o.text())+1)),n.errorsType){case"block":return t("<span>",{"class":"help-block"}).html(r).insertAfter(i);case"tooltip":return i.tooltip({placement:"top",title:r,container:"body"})}}),t.khausLaunchAlerts(),0===a&&n.resetForm?t(n.form)[0].reset():void 0},t.khausNotify=function(e,a,n){var r,o,s,i,u,d,l;return l=t.extend({delay:1e4,template:"default",icon:null},n),r=t(".khaus-notify-container"),0===r.size()&&(r=t("<div>",{"class":"khaus-notify-container"}).prependTo("body")),d=t("<div>",{"class":"khaus-notify khaus-notify-"+l.template}),null!==l.icon&&(o=t("<i>",{"class":"fa fa-fw "+l.icon}),s=t("<div>",{"class":"icon-container"}).html(o),d.append(s)),i=t("<div>",{"class":"text-container"}),u=t("<div>",{"class":"title"}).html(e).appendTo(i),a=t("<div>").html(a).appendTo(i),d.append(i),d.appendTo(r),d.on("click",function(){return t(this).removeClass("khaus-notify-show"),t(this).addClass("khaus-notify-hide"),t(this).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){return t(this).remove()})}),setTimeout(function(){return d.addClass("khaus-notify-show"),setTimeout(function(){return d.trigger("click")},l.delay)},1)},t.khausLaunchFormErrors=function(){var e;return window.khaus.errors&&window.khaus.form?(e=t("form[name="+window.khaus.form+"]"),t.khausDisplayFormErrors({errorsType:"block",form:e})):void 0},t.khausLaunchAlerts=function(e){var a;return a=t.extend({title:{"default":"",primary:"",success:"El proceso ha finalizado",danger:"Ha ocurrido un error",warning:"Importante",info:"Informaci&oacute;n"}},e),t.each(a.title,function(e,a){return window.khaus[e]?(t.isArray(window.khaus[e])?t.khausNotify(window.khaus[e][0],window.khaus[e][1],{template:e}):t.isPlainObject(window.khaus[e])?t.each(window.khaus[e],function(a,n){return t.khausNotify(a,n,{template:e})}):t.khausNotify(a,window.khaus[e],{template:e}),window.khaus[e]=""):void 0})},t.khausAjaxWait=function(e){var a;switch(a=t.extend({type:"cursor"},e),a.type){case"cursor":return t.ajaxSetup({beforeSend:function(){return t("body").addClass("khaus-ajax-wait")},complete:function(){return t("body").removeClass("khaus-ajax-wait")},success:function(){return t("body").removeClass("khaus-ajax-wait")}})}},t.fn.khausAttachName=function(){return t.each(this,function(){return t(this).on("submit",function(e){return t(this).is("[name]")&&0===t(this).find("input[name=_name]").size()?t("<input>",{name:"_name",type:"hidden",value:t(this).attr("name")}).prependTo(t(this)):void 0})})},t.fn.khausConfirmBeforeSubmit=function(){return t.each(this,function(){var e,a;return a=t(this).data("khaus-title"),e=t(this).data("khaus-confirm"),t(this).on("submit",function(n){var r;return n.preventDefault(),r=t(this),t.khausConfirm(a,e,function(){return r.off("submit"),r.submit()})})})},t.khausAlert=function(e,a){var n,r,o,s,i,u;return t(".khaus-modal-alert").size()>0&&t(".khaus-modal-alert").remove(),n=t("<div>",{"class":"modal fade khaus-modal-alert"}),r=t("<div>",{"class":"modal-dialog"}).appendTo(n),o=t("<div>",{"class":"modal-content"}).appendTo(r),u=t("<div>",{"class":"modal-header"}).appendTo(o),t("<h4>",{"class":"modal-title"}).html(e).appendTo(u),s=t("<div>",{"class":"modal-body"}).html(a).appendTo(o),i=t("<div>",{"class":"modal-footer"}).appendTo(o),t("<button>",{type:"button","class":"btn btn-primary","data-dismiss":"modal"}).html("Aceptar").appendTo(i),n.modal("show")},t.fn.khausAlert=function(){return this.each(function(){return t(this).on("click",function(e){var a,n;return a=t(this).data("khaus-alert"),n=t(this).data("khaus-title"),t.khausAlert(n,a)})})},t.khausPrompt=function(e,a,n,r){var o,s,i,u,d,l,c;return null==n&&(n=""),null==r&&(r=function(){}),t(".khaus-modal-prompt").size()>0&&t(".khaus-modal-prompt").remove(),s=t("<div>",{"class":"modal fade khaus-modal-prompt"}),i=t("<div>",{"class":"modal-dialog"}).appendTo(s),u=t("<div>",{"class":"modal-content"}).appendTo(i),c=t("<div>",{"class":"modal-header"}).appendTo(u),t("<h4>",{"class":"modal-title"}).html(e).appendTo(c),d=t("<div>",{"class":"modal-body"}).appendTo(u),t("<h5>").css({"font-weight":"bold"}).html(a).appendTo(d),o=t("<input>",{type:"text","class":"form-control"}).val(n).appendTo(d),l=t("<div>",{"class":"modal-footer"}).appendTo(u),t("<button>",{type:"button","class":"btn btn-default","data-dismiss":"modal"}).html("Cancelar").appendTo(l),t("<button>",{type:"button","class":"btn btn-primary","data-dismiss":"modal"}).html("Aceptar").on("click",function(){r(o.val())}).appendTo(l),s.modal("show"),setTimeout(function(){return o.select()},200)},t.khausConfirm=function(e,a,n){var r,o,s,i,u,d;return null==n&&(n=function(){}),t(".khaus-modal-confirm").size()>0&&t(".khaus-modal-confirm").remove(),r=t("<div>",{"class":"modal fade khaus-modal-confirm"}),o=t("<div>",{"class":"modal-dialog"}).appendTo(r),s=t("<div>",{"class":"modal-content"}).appendTo(o),d=t("<div>",{"class":"modal-header"}).appendTo(s),t("<h4>",{"class":"modal-title"}).html(e).appendTo(d),i=t("<div>",{"class":"modal-body"}).html(a).appendTo(s),u=t("<div>",{"class":"modal-footer"}).appendTo(s),t("<button>",{type:"button","class":"btn btn-default","data-dismiss":"modal"}).html("Cancelar").appendTo(u),t("<button>",{type:"button","class":"btn btn-primary","data-dismiss":"modal"}).html("Aceptar").on("click",function(){n()}).appendTo(u),r.modal("show")},t.fn.khausForm=function(e){return t.each(this,function(){var e;return e=t(this),e.on("submit",function(a){return e.ajaxForm({delegation:!0,success:function(a,n,r,o){return t.each(a,function(t,e){return t.match(/^khaus/)&&(t=t.replace("khaus","").toLowerCase(),"undefined"!=typeof window.khaus[t])?window.khaus[t]=e:void 0}),t.khausLaunchAlerts(),null!==window.khaus.redirect?(e.data("khaus-reset")&&t(o)[0].reset(),t.isArray(window.khaus.redirect)?setTimeout(function(){return window.location=window.baseURL+window.khaus.redirect[0]},window.khaus.redirect[1]):t.isPlainObject(window.khaus.redirect)?t.each(window.khaus.redirect,function(t,e){return setTimeout(function(){return window.location=window.baseURL+t},e)}):window.location=window.baseURL+window.khaus.redirect):void 0},error:function(a,n,r,o){var s;return t.khausCleanFormErrors(o),s="undefined"!=typeof a.responseJSON?a.responseJSON:t.parseJSON(a.responseText),t.khausDisplayFormErrors({errorsType:e.data("khaus-errortype")||"block",form:o,errors:s,resetForm:e.data("khaus-reset")||!1})}})})})},t.fn.khausNumberFormat=function(){var e;return e=function(t){return t=t.replace(/[^0-9]+/g,""),t=t.replace(/\B(?=(\d{3})+(?!\d))/g,".")},this.each(function(){var a;return t(this).is(":input")?(a=e(t(this).val()),t(this).val(a)):(a=e(t(this).html()),t(this).html(a))})},t.khausLoadSelect=function(e,a,n,r){return e.attr("disabled",!0),e.text(""),t.get(""+window.baseURL+a+"/"+n+".json",function(a){return t.each(a,function(){return t("<option>",{value:this.id}).text(this.nombre).appendTo(e)}),e.removeAttr("disabled"),e.val(e.find("option[value="+r+"]").size()>0?r:e.find("option:first").attr("value"))})},t.fn.khausLoadSelect=function(e){var a;return a=t.extend({url:t(this).data("khaus-url"),select:t(this).data("khaus-select"),selected:t(this).data("khaus-selected")},e),this.each(function(){var e;return e=t(a.select),this.value?t.khausLoadSelect(e,a.url,this.value,a.selected):(e.text(""),e.attr("disabled",!0)),t(this).on("change",function(){return t.khausLoadSelect(e,a.url,this.value,a.selected)})})},t.fn.khausClone=function(){return this.each(function(){return t(this).on("click",function(e){var a,n,r;return e.preventDefault(),n=t(this).data("khaus-clone"),r=t(n).last(),a=r.clone(),a.find(":input[name]").each(function(){var e,a,n;return a=t(this).attr("name"),e=a.match(/\[(\d+)\]/),e?(e=parseInt(e[1]),n=a.replace("["+e+"]","["+(e+1)+"]"),t(this).attr("name",n)):void 0}),a.find("input").val(""),a.find("select option:first").attr("selected",!0),a.find(":button[data-khaus-removeparent]").khausRemoveParent(),a.insertAfter(r)})})},t.fn.khausRemoveParent=function(){return this.each(function(){return t(this).on("click",function(e){var a,n;return e.preventDefault(),a=t(this).data("khaus-removeparent"),n=t(this).parents(a),n.remove()})})}}(jQuery),$(document).ready(function(){return $("form").khausAttachName(),$.khausLaunchFormErrors(),$.khausLaunchAlerts(),$("form.khaus-form").khausForm(),$("form[data-khaus-confirm]").khausConfirmBeforeSubmit(),$(":button[data-khaus-clone]").khausClone(),$(":button[data-khaus-removeparent]").khausRemoveParent(),$(":button[data-khaus-alert]").khausAlert(),$(".khaus-numero").khausNumberFormat(),$("select[data-khaus-select]").khausLoadSelect()});
//# sourceMappingURL=khausjs.min.js.map