!function(t){return t.khausCleanFormErrors=function(a){return t(a).find(".form-group").removeClass("has-error has-feedback"),t(a).find("span.form-control-feedback").remove(),t(a).find("span.help-block").remove(),t(a).find(":input").tooltip("destroy")},t.khausDisplayFormErrors=function(a){var e,n;return n=t.extend({errorsType:"block",form:null,errors:window.khaus.errors,resetForm:!1},a),e=0,t.each(n.errors,function(a,o){var r,s,u,i,d,l,c;if(a.match(/^khaus/)&&(a=a.replace("khaus","").toLowerCase(),"undefined"!=typeof window.khaus[a]))return window.khaus[a]=o,!0;switch(e++,u=t(n.form).find(":input[name="+a+"]"),1!==u.size()&&(u=t(n.form).find(":input[name^='"+a+"[']")),u.parents(".form-group").addClass("has-error"),s=u.parents(".tab-content"),s.size()>0&&(1===e&&t("ul.nav-tabs .badge").remove(),i=u.parents(".tab-pane"),d=i.attr("id"),c=t("ul.nav-tabs a[href=#"+d+"]"),r=c.find(".badge"),0===r.length&&(r=t("<span>",{"class":"badge"}).text(0),r.appendTo(c)),r.text(parseInt(r.text())+1)),n.errorsType){case"block":return l=u.parents(".form-group"),t("<span>",{"class":"help-block"}).html(o).appendTo(l);case"tooltip":return u.tooltip({placement:"top",title:o,container:"body"})}}),t.khausLaunchAlerts(),0===e&&n.resetForm?t(n.form)[0].reset():void 0},t.khausLaunchFormErrors=function(){var a;return window.khaus.errors&&window.khaus.form?(a=t("form[name="+window.khaus.form+"]"),t.khausDisplayFormErrors({errorsType:"block",form:a})):void 0},t.khausLaunchAlerts=function(a){var e;return e=t.extend({title:{"default":"",primary:"",success:"El proceso ha finalizado",danger:"Ha ocurrido un error",warning:"Importante",info:"Informaci&oacute;n"}},a),t.each(e.title,function(a,e){var n,o;return window.khaus[a]?(o=a,"default"===a&&(o="alert"),"danger"===a&&(o="error"),"info"===a&&(o="information"),t.isPlainObject(window.khaus[a])||t.isArray(window.khaus[a])?t.each(window.khaus[a],function(t,a){var e;return e=noty({text:a,type:o})}):n=noty({text:window.khaus[a],type:o}),window.khaus[a]=""):void 0})},t.khausAjaxWait=function(a){var e;switch(e=t.extend({type:"cursor"},a),e.type){case"cursor":return t.ajaxSetup({beforeSend:function(){return t("body").addClass("khaus-ajax-wait")},complete:function(){return t("body").removeClass("khaus-ajax-wait")},success:function(){return t("body").removeClass("khaus-ajax-wait")}})}},t.fn.khausAttachName=function(){return t.each(this,function(){return t(this).on("submit",function(a){return t(this).is("[name]")&&0===t(this).find("input[name=_name]").size()?t("<input>",{name:"_name",type:"hidden",value:t(this).attr("name")}).prependTo(t(this)):void 0})})},t.fn.khausConfirmBeforeSubmit=function(){return t.each(this,function(){var a,e;return e=t(this).data("khaus-title"),a=t(this).data("khaus-confirm"),t(this).on("submit",function(n){var o;return t(":focus").blur(),n.preventDefault(),o=t(this),t.khausConfirm(e,a,function(){return o.off("submit"),o.submit()})})})},t.khausAlert=function(a,e){var n,o,r,s,u,i;return t(".khaus-modal-alert").size()>0&&t(".khaus-modal-alert").remove(),n=t("<div>",{"class":"modal fade khaus-modal-alert"}),o=t("<div>",{"class":"modal-dialog"}).appendTo(n),r=t("<div>",{"class":"modal-content"}).appendTo(o),i=t("<div>",{"class":"modal-header"}).appendTo(r),t("<h4>",{"class":"modal-title"}).html(a).appendTo(i),s=t("<div>",{"class":"modal-body"}).html(e).appendTo(r),u=t("<div>",{"class":"modal-footer"}).appendTo(r),t("<button>",{type:"button","class":"btn btn-primary","data-dismiss":"modal"}).html("Aceptar").appendTo(u),n.modal("show")},t.fn.khausAlert=function(){return this.each(function(){return t(this).on("click",function(a){var e,n;return e=t(this).data("khaus-alert"),n=t(this).data("khaus-title"),t.khausAlert(n,e)})})},t.khausPrompt=function(a,e,n,o){var r,s,u,i,d,l,c;return null==n&&(n=""),null==o&&(o=function(){}),t(".khaus-modal-prompt").size()>0&&t(".khaus-modal-prompt").remove(),s=t("<div>",{"class":"modal fade khaus-modal-prompt"}),u=t("<div>",{"class":"modal-dialog"}).appendTo(s),i=t("<div>",{"class":"modal-content"}).appendTo(u),c=t("<div>",{"class":"modal-header"}).appendTo(i),t("<h4>",{"class":"modal-title"}).html(a).appendTo(c),d=t("<div>",{"class":"modal-body"}).appendTo(i),t("<h5>").css({"font-weight":"bold"}).html(e).appendTo(d),r=t("<input>",{type:"text","class":"form-control"}).val(n).appendTo(d),l=t("<div>",{"class":"modal-footer"}).appendTo(i),t("<button>",{type:"button","class":"btn btn-default","data-dismiss":"modal"}).html("Cancelar").appendTo(l),t("<button>",{type:"button","class":"btn btn-primary","data-dismiss":"modal"}).html("Aceptar").on("click",function(){o(r.val())}).appendTo(l),s.modal("show"),setTimeout(function(){return r.select()},200)},t.khausConfirm=function(a,e,n){var o,r,s,u,i,d,l;return null==n&&(n=function(){}),t(".khaus-modal-confirm").size()>0&&t(".khaus-modal-confirm").remove(),r=t("<div>",{"class":"modal fade khaus-modal-confirm"}),s=t("<div>",{"class":"modal-dialog"}).appendTo(r),u=t("<div>",{"class":"modal-content"}).appendTo(s),l=t("<div>",{"class":"modal-header"}).appendTo(u),t("<h4>",{"class":"modal-title"}).html(a).appendTo(l),i=t("<div>",{"class":"modal-body"}).html(e).appendTo(u),d=t("<div>",{"class":"modal-footer"}).appendTo(u),t("<button>",{type:"button","class":"btn btn-default","data-dismiss":"modal"}).html("Cancelar").appendTo(d),o=t("<button>",{type:"button","class":"btn btn-primary","data-dismiss":"modal"}).html("Aceptar").on("click",function(){n()}).appendTo(d),setTimeout(function(){return o.focus()},300),r.modal("show")},t.fn.khausForm=function(a){var e;return e=t.extend({onSubmit:function(){},onSuccess:function(){},onError:function(){}},a),t.each(this,function(){var a;return a=t(this),a.on("submit",function(n){return e.onSubmit(a,n),a.ajaxForm({delegation:!0,success:function(o,r,s,u){var i;return t.each(o,function(t,a){return t.match(/^khaus/)&&(t=t.replace("khaus","").toLowerCase(),"undefined"!=typeof window.khaus[t])?window.khaus[t]=a:void 0}),t.khausLaunchAlerts(),null!==window.khaus.redirect&&(a.data("khaus-reset")&&t(u)[0].reset(),t.isArray(window.khaus.redirect)?setTimeout(function(){var t;return t=window.khaus.redirect[0],t.match(/^http:\/\//i)||(t=window.baseURL+t),window.location=t},window.khaus.redirect[1]):t.isPlainObject(window.khaus.redirect)?t.each(window.khaus.redirect,function(t,a){return setTimeout(function(){var a;return a=t,a.match(/^http:\/\//i)||(a=window.baseURL+a),window.location=a},a)}):(i=window.khaus.redirect,i.match(/^http:\/\//i)||(i=window.baseURL+i),window.location=i)),e.onSuccess(u,n,o)},error:function(o,r,s,u){var i;return t.khausCleanFormErrors(u),i="undefined"!=typeof o.responseJSON?o.responseJSON:t.parseJSON(o.responseText),t.khausDisplayFormErrors({errorsType:a.data("khaus-errortype")||"block",form:u,errors:i,resetForm:a.data("khaus-reset")||!1}),e.onError(u,n,o)}})})})},t.fn.khausNumberFormat=function(){var a;return a=function(t){return t=t.replace(/[^0-9]+/g,""),t=t.replace(/\B(?=(\d{3})+(?!\d))/g,".")},this.each(function(){var e;return t(this).is(":input")?(e=a(t(this).val()),t(this).val(e)):(e=a(t(this).html()),t(this).html(e))})},t.khausLoadSelect=function(a,e,n,o){return a.attr("disabled",!0),a.text(""),t.get(""+window.baseURL+e+"/"+n+".json",function(e){return t.each(e,function(){return t("<option>",{value:this.id}).text(this.nombre).appendTo(a)}),a.removeAttr("disabled"),a.val(a.find("option[value="+o+"]").size()>0?o:a.find("option:first").attr("value"))})},t.fn.khausLoadSelect=function(a){var e;return e=t.extend({url:t(this).data("khaus-url"),select:t(this).data("khaus-select"),selected:t(this).data("khaus-selected")},a),this.each(function(){var a;return a=t(e.select),this.value?t.khausLoadSelect(a,e.url,this.value,e.selected):(a.text(""),a.attr("disabled",!0)),t(this).on("change",function(){return t.khausLoadSelect(a,e.url,this.value,e.selected)})})},t.fn.khausClone=function(){return this.each(function(){return t(this).on("click",function(a){var e,n,o;return a.preventDefault(),n=t(this).data("khaus-clone"),o=t(n).last(),e=o.clone(),e.find(":input[name]").each(function(){var a,e,n;return e=t(this).attr("name"),a=e.match(/\[(\d+)\]/),a?(a=parseInt(a[1]),n=e.replace("["+a+"]","["+(a+1)+"]"),t(this).attr("name",n)):void 0}),e.find("input").val(""),e.find("select option:first").attr("selected",!0),e.find(":button[data-khaus-removeparent]").khausRemoveParent(),e.insertAfter(o)})})},t.fn.khausRemoveParent=function(){return this.each(function(){return t(this).on("click",function(a){var e,n;return a.preventDefault(),e=t(this).data("khaus-removeparent"),n=t(this).parents(e),n.remove()})})}}(jQuery),$(function(){return $.noty.defaults.theme="relax",$.noty.defaults.layout="bottomRight",$.noty.defaults.timeout=8e3,$.noty.defaults.animation.open="animated bounceInRight",$.noty.defaults.animation.close="animated bounceOutRight",$("form").khausAttachName(),$.khausLaunchFormErrors(),$.khausLaunchAlerts(),$("form.khaus-form").khausForm(),$("form[data-khaus-confirm]").khausConfirmBeforeSubmit(),$(":button[data-khaus-clone]").khausClone(),$(":button[data-khaus-removeparent]").khausRemoveParent(),$(":button[data-khaus-alert]").khausAlert(),$(".khaus-numero").khausNumberFormat(),$("select[data-khaus-select]").khausLoadSelect()});
//# sourceMappingURL=khausjs.min.js.map