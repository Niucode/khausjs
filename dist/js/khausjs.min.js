!function(t){return t.fn.khausImageUploader=function(){return t.each(this,function(a,e){var n,o,r;return n=t(e).find("img.khaus-uploaded-thumb"),n.on("click",function(){var a;return a=t(this).attr("src").split("/").pop(),t("<input>",{type:"hidden",name:"khaus_delete_thumb[]",value:a}).appendTo(e),t(this).remove()}),o=t(e).find(":input[type=file]"),r=o.attr("name"),o.removeAttr("name"),o.on("change",function(a){return t(this).val()?(t.each(a.target.files,function(a,n){var o;return n.type.match("image.*")&&(o=new FileReader,o.onload=function(a){return function(a){var n;return n=btoa(t.now()),n=n.replace(/[^a-z]+/gi,""),t("<input>",{"class":n,type:"hidden",name:r+"[]",value:a.target.result}).prependTo(e),t("<img>",{"class":"khaus-upload-thumb",src:a.target.result}).on("click",function(){return t("input."+n).remove(),t(this).remove()}).prependTo(e)}}(n)),o.readAsDataURL(n)}),t(this).val("")):void 0})})},t.khausCleanFormErrors=function(a){return t(a).find(".form-group").removeClass("has-error has-feedback"),t(a).find("span.form-control-feedback").remove(),t(a).find("span.help-block").remove(),t(a).find(":input").tooltip("destroy")},t.khausDisplayFormErrors=function(a){var e,n;return n=t.extend({errorsType:"block",form:null,errors:window.khaus.errors,resetForm:!1},a),e=0,t.each(n.errors,function(a,o){var r,s,i,u,d,l,c;if(a.match(/^khaus/)&&(a=a.replace("khaus","").toLowerCase(),"undefined"!=typeof window.khaus[a]))return window.khaus[a]=o,!0;switch(e++,i=t(n.form).find(":input[name="+a+"]"),1!==i.size()&&(i=t(n.form).find(":input[name^='"+a+"[']")),i.parents(".form-group").addClass("has-error"),s=i.parents(".tab-content"),s.size()>0&&(1===e&&t("ul.nav-tabs .badge").remove(),u=i.parents(".tab-pane"),d=u.attr("id"),c=t("ul.nav-tabs a[href=#"+d+"]"),r=c.find(".badge"),0===r.length&&(r=t("<span>",{"class":"badge"}).text(0),r.appendTo(c)),r.text(parseInt(r.text())+1)),n.errorsType){case"block":return l=i.parents(".form-group"),t("<span>",{"class":"help-block"}).html(o).appendTo(l);case"tooltip":return i.tooltip({placement:"top",title:o,container:"body"})}}),t.khausLaunchAlerts(),0===e&&n.resetForm?t(n.form)[0].reset():void 0},t.khausNotify=function(a,e,n){var o,r,s,i,u,d,l;return l=t.extend({delay:1e4,template:"default",icon:null},n),o=t(".khaus-notify-container"),0===o.size()&&(o=t("<div>",{"class":"khaus-notify-container"}).prependTo("body")),d=t("<div>",{"class":"khaus-notify khaus-notify-"+l.template}),null!==l.icon&&(r=t("<i>",{"class":"fa fa-fw "+l.icon}),s=t("<div>",{"class":"icon-container"}).html(r),d.append(s)),i=t("<div>",{"class":"text-container"}),u=t("<div>",{"class":"title"}).html(a).appendTo(i),e=t("<div>").html(e).appendTo(i),d.append(i),d.appendTo(o),d.on("click",function(){return t(this).removeClass("khaus-notify-show"),t(this).addClass("khaus-notify-hide"),t(this).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){return t(this).remove()})}),setTimeout(function(){return d.addClass("khaus-notify-show"),setTimeout(function(){return d.trigger("click")},l.delay)},1)},t.khausLaunchFormErrors=function(){var a;return window.khaus.errors&&window.khaus.form?(a=t("form[name="+window.khaus.form+"]"),t.khausDisplayFormErrors({errorsType:"block",form:a})):void 0},t.khausLaunchAlerts=function(a){var e;return e=t.extend({title:{"default":"",primary:"",success:"El proceso ha finalizado",danger:"Ha ocurrido un error",warning:"Importante",info:"Informaci&oacute;n"}},a),t.each(e.title,function(a,e){return window.khaus[a]?(t.isArray(window.khaus[a])?t.khausNotify(window.khaus[a][0],window.khaus[a][1],{template:a}):t.isPlainObject(window.khaus[a])?t.each(window.khaus[a],function(e,n){return t.khausNotify(e,n,{template:a})}):t.khausNotify(e,window.khaus[a],{template:a}),window.khaus[a]=""):void 0})},t.khausAjaxWait=function(a){var e;switch(e=t.extend({type:"cursor"},a),e.type){case"cursor":return t.ajaxSetup({beforeSend:function(){return t("body").addClass("khaus-ajax-wait")},complete:function(){return t("body").removeClass("khaus-ajax-wait")},success:function(){return t("body").removeClass("khaus-ajax-wait")}})}},t.fn.khausAttachName=function(){return t.each(this,function(){return t(this).on("submit",function(a){return t(this).is("[name]")&&0===t(this).find("input[name=_name]").size()?t("<input>",{name:"_name",type:"hidden",value:t(this).attr("name")}).prependTo(t(this)):void 0})})},t.fn.khausConfirmBeforeSubmit=function(){return t.each(this,function(){var a,e;return e=t(this).data("khaus-title"),a=t(this).data("khaus-confirm"),t(this).on("submit",function(n){var o;return t(":focus").blur(),n.preventDefault(),o=t(this),t.khausConfirm(e,a,function(){return o.off("submit"),o.submit()})})})},t.khausAlert=function(a,e){var n,o,r,s,i,u;return t(".khaus-modal-alert").size()>0&&t(".khaus-modal-alert").remove(),n=t("<div>",{"class":"modal fade khaus-modal-alert"}),o=t("<div>",{"class":"modal-dialog"}).appendTo(n),r=t("<div>",{"class":"modal-content"}).appendTo(o),u=t("<div>",{"class":"modal-header"}).appendTo(r),t("<h4>",{"class":"modal-title"}).html(a).appendTo(u),s=t("<div>",{"class":"modal-body"}).html(e).appendTo(r),i=t("<div>",{"class":"modal-footer"}).appendTo(r),t("<button>",{type:"button","class":"btn btn-primary","data-dismiss":"modal"}).html("Aceptar").appendTo(i),n.modal("show")},t.fn.khausAlert=function(){return this.each(function(){return t(this).on("click",function(a){var e,n;return e=t(this).data("khaus-alert"),n=t(this).data("khaus-title"),t.khausAlert(n,e)})})},t.khausPrompt=function(a,e,n,o){var r,s,i,u,d,l,c;return null==n&&(n=""),null==o&&(o=function(){}),t(".khaus-modal-prompt").size()>0&&t(".khaus-modal-prompt").remove(),s=t("<div>",{"class":"modal fade khaus-modal-prompt"}),i=t("<div>",{"class":"modal-dialog"}).appendTo(s),u=t("<div>",{"class":"modal-content"}).appendTo(i),c=t("<div>",{"class":"modal-header"}).appendTo(u),t("<h4>",{"class":"modal-title"}).html(a).appendTo(c),d=t("<div>",{"class":"modal-body"}).appendTo(u),t("<h5>").css({"font-weight":"bold"}).html(e).appendTo(d),r=t("<input>",{type:"text","class":"form-control"}).val(n).appendTo(d),l=t("<div>",{"class":"modal-footer"}).appendTo(u),t("<button>",{type:"button","class":"btn btn-default","data-dismiss":"modal"}).html("Cancelar").appendTo(l),t("<button>",{type:"button","class":"btn btn-primary","data-dismiss":"modal"}).html("Aceptar").on("click",function(){o(r.val())}).appendTo(l),s.modal("show"),setTimeout(function(){return r.select()},200)},t.khausConfirm=function(a,e,n){var o,r,s,i,u,d,l;return null==n&&(n=function(){}),t(".khaus-modal-confirm").size()>0&&t(".khaus-modal-confirm").remove(),r=t("<div>",{"class":"modal fade khaus-modal-confirm"}),s=t("<div>",{"class":"modal-dialog"}).appendTo(r),i=t("<div>",{"class":"modal-content"}).appendTo(s),l=t("<div>",{"class":"modal-header"}).appendTo(i),t("<h4>",{"class":"modal-title"}).html(a).appendTo(l),u=t("<div>",{"class":"modal-body"}).html(e).appendTo(i),d=t("<div>",{"class":"modal-footer"}).appendTo(i),t("<button>",{type:"button","class":"btn btn-default","data-dismiss":"modal"}).html("Cancelar").appendTo(d),o=t("<button>",{type:"button","class":"btn btn-primary","data-dismiss":"modal"}).html("Aceptar").on("click",function(){n()}).appendTo(d),setTimeout(function(){return o.focus()},300),r.modal("show")},t.fn.khausForm=function(a){return t.each(this,function(){var a;return a=t(this),a.on("submit",function(e){return a.ajaxForm({delegation:!0,success:function(e,n,o,r){var s,i;return t.each(e,function(t,a){return t.match(/^khaus/)&&(t=t.replace("khaus","").toLowerCase(),"undefined"!=typeof window.khaus[t])?window.khaus[t]=a:void 0}),t.khausLaunchAlerts(),null!==window.khaus.redirect?(a.data("khaus-reset")&&t(r)[0].reset(),t.isArray(window.khaus.redirect)?setTimeout(function(){var t,a;return t=window.khaus.redirect[0],t=null!=(a=t.match(/^http:\/\//i))?a:{location:window.baseURL+t},window.location=t},window.khaus.redirect[1]):t.isPlainObject(window.khaus.redirect)?t.each(window.khaus.redirect,function(t,a){return setTimeout(function(){var a,e;return a=t,a=null!=(e=a.match(/^http:\/\//i))?e:{location:window.baseURL+a},window.location=a},a)}):(s=window.khaus.redirect,s=null!=(i=s.match(/^http:\/\//i))?i:{location:window.baseURL+s},window.location=s)):void 0},error:function(e,n,o,r){var s;return t.khausCleanFormErrors(r),s="undefined"!=typeof e.responseJSON?e.responseJSON:t.parseJSON(e.responseText),t.khausDisplayFormErrors({errorsType:a.data("khaus-errortype")||"block",form:r,errors:s,resetForm:a.data("khaus-reset")||!1})}})})})},t.fn.khausNumberFormat=function(){var a;return a=function(t){return t=t.replace(/[^0-9]+/g,""),t=t.replace(/\B(?=(\d{3})+(?!\d))/g,".")},this.each(function(){var e;return t(this).is(":input")?(e=a(t(this).val()),t(this).val(e)):(e=a(t(this).html()),t(this).html(e))})},t.khausLoadSelect=function(a,e,n,o){return a.attr("disabled",!0),a.text(""),t.get(""+window.baseURL+e+"/"+n+".json",function(e){return t.each(e,function(){return t("<option>",{value:this.id}).text(this.nombre).appendTo(a)}),a.removeAttr("disabled"),a.val(a.find("option[value="+o+"]").size()>0?o:a.find("option:first").attr("value"))})},t.fn.khausLoadSelect=function(a){var e;return e=t.extend({url:t(this).data("khaus-url"),select:t(this).data("khaus-select"),selected:t(this).data("khaus-selected")},a),this.each(function(){var a;return a=t(e.select),this.value?t.khausLoadSelect(a,e.url,this.value,e.selected):(a.text(""),a.attr("disabled",!0)),t(this).on("change",function(){return t.khausLoadSelect(a,e.url,this.value,e.selected)})})},t.fn.khausClone=function(){return this.each(function(){return t(this).on("click",function(a){var e,n,o;return a.preventDefault(),n=t(this).data("khaus-clone"),o=t(n).last(),e=o.clone(),e.find(":input[name]").each(function(){var a,e,n;return e=t(this).attr("name"),a=e.match(/\[(\d+)\]/),a?(a=parseInt(a[1]),n=e.replace("["+a+"]","["+(a+1)+"]"),t(this).attr("name",n)):void 0}),e.find("input").val(""),e.find("select option:first").attr("selected",!0),e.find(":button[data-khaus-removeparent]").khausRemoveParent(),e.insertAfter(o)})})},t.fn.khausRemoveParent=function(){return this.each(function(){return t(this).on("click",function(a){var e,n;return a.preventDefault(),e=t(this).data("khaus-removeparent"),n=t(this).parents(e),n.remove()})})}}(jQuery),$(document).ready(function(){return $("form").khausAttachName(),$.khausLaunchFormErrors(),$.khausLaunchAlerts(),$("form.khaus-form").khausForm(),$("form[data-khaus-confirm]").khausConfirmBeforeSubmit(),$(":button[data-khaus-clone]").khausClone(),$(":button[data-khaus-removeparent]").khausRemoveParent(),$(":button[data-khaus-alert]").khausAlert(),$(".khaus-numero").khausNumberFormat(),$("select[data-khaus-select]").khausLoadSelect()});
//# sourceMappingURL=khausjs.min.js.map